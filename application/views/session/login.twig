<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="version" content="0.1.0">
    <title>{{ lang('session_login_info_title') }}</title>
    <meta description="CPS is Claim Payment System for internal use only. Supports Bang Ke Mau, Claim Borereaux, Claim Fund and more.">
    <link href="{{ base_url() }}assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ base_url() }}assets/css/fontawesome.min.css" rel="stylesheet">
    <link href="{{ base_url() }}assets/css/mdb.min.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{{ base_url() }}favicon.ico" sizes="32x32">
</head>
<style>
    html, body, header, .view { height: 100%; }

    @media (max-width: 740px) {
        html, body, header, .view { height: 1000px; }
    }
    @media (min-width: 800px) and (max-width: 850px) {
    html, body, header, .view { height: 650px; }
    }
    .top-nav-collapse { background-color: #3f51b5 !important; }
    .navbar:not(.top-nav-collapse) { background: transparent !important; }
    @media (max-width: 991px) {
    .navbar:not(.top-nav-collapse) { background: #3f51b5 !important; }
    }
    .rgba-gradient {
      background: -webkit-linear-gradient(45deg, rgba(0, 0, 0, 0.7), rgba(72, 15, 144, 0.4) 100%);
      background: -webkit-gradient(linear, 45deg, from(rgba(0, 0, 0, 0.7), rgba(72, 15, 144, 0.4) 100%)));
      background: linear-gradient(to 45deg, rgba(0, 0, 0, 0.7), rgba(72, 15, 144, 0.4) 100%);
    }
    .card { background-color: rgba(126, 123, 215, 0.2); }
    .md-form label { color: #ffffff; }
    h6 { line-height: 1.7; }
</style>
<body>
    <!-- <nav class="navbar navbar-expand-lg navbar-dark fixed-top scrolling-navbar"> -->
        <!-- <div class="container"> -->
            <!-- <a class="navbar-brand" href="#"> -->
                <!-- <strong>{{ lang('session_login_menu_brand') }}</strong> -->
            <!-- </a> -->
            <!-- <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCPS" aria-controls="navbarCPS" aria-expanded="false" aria-label="Toggle navigation"> -->
                <!-- <span class="navbar-toggler-icon"></span> -->
            <!-- </button> -->
            <!-- <div class="collapse navbar-collapse" id="navbarCPS"> -->
                <!-- <ul class="navbar-nav mr-auto"> -->
                    <!-- <li class="nav-item"> -->
                        <!-- <a class="nav-link" href="#">{{ lang('session_login_menu_home') }}</a> -->
                    <!-- </li> -->
                    <!-- <li class="nav-item"> -->
                        <!-- <a class="nav-link" href="#">{{ lang('session_login_menu_finance') }}</a> -->
                    <!-- </li> -->
                    <!-- <li class="nav-item"> -->
                        <!-- <a class="nav-link" href="#">{{ lang('session_login_menu_claim') }}</a> -->
                    <!-- </li> -->
                <!-- </ul> -->
            <!-- </div> -->
        <!-- </div> -->
    <!-- </nav> -->
    <!-- Full Page Intro -->
    <div class="view" style="background-image: url('{{ base_url() }}assets/img/mdb.jpg'); background-repeat: no-repeat; background-size: cover; background-position: center center;">
        <!-- Mask & flexbox options-->
        <div class="mask rgba-gradient d-flex justify-content-center align-items-center">
            <!-- Content -->
            <div class="container">
                <!--Grid row-->
                <div class="row mt-5">
                    <!--Grid column-->
                    <div class="col-md-6 mb-5 mt-md-0 mt-5 white-text text-center text-md-left">
                        <img src="{{base_url('assets/img/logo.png')}}" width="80" height="65" alt=""/>
                        <h1 class="h1-responsive font-weight-bold wow fadeInLeft" data-wow-delay="0.3s">{{ lang('session_login_info_title') }}</h1>
                        <hr class="hr-light wow fadeInLeft" data-wow-delay="0.3s">
                        <h6 class="mb-3 wow fadeInLeft" data-wow-delay="0.3s">{{ lang('session_login_info_desc') }}</h6>
                        <!-- <a class="btn btn-outline-white wow fadeInLeft" data-wow-delay="0.3s">{{ lang('session_login_info_learn_more') }}</a> -->
                    </div>
                    <!--Grid column-->
                    <!--Grid column-->
                    <div class="col-md-6 col-xl-5 mb-4">
                        <!--Form-->
                        <form id="loginForm" role="form" enctype="multipart/form-data" method="post">
                            <div class="card wow fadeInRight" data-wow-delay="0.3s">
                                <div class="card-body">
                                    <!--Header-->
                                    <div class="text-center">
                                        <h3 class="white-text"><i class="fas fa-sign-in-alt white-text"></i> {{ lang('session_login_title') }}:</h3>
                                        <hr class="hr-light">
                                        <span class="cyan-text">{{ validation_errors }}</span>
                                        <span class="cyan-text">{{ msg }}</span>
                                    </div>
                                    <!--Body-->
                                    <div class="md-form">
                                        <i class="fas fa-user prefix white-text active"></i>
                                        <input type="text" name="username" id="username" class="white-text form-control" required />
                                        <label for="username" class="active">{{ lang('session_login_field_username') }}</label> 
                                    </div>
                                    <div class="md-form">
                                        <i class="fas fa-lock prefix white-text active"></i>
                                        <input type="password" name="password" id="password" class="white-text form-control" required />
                                        <label for="password" class="active">{{ lang('session_login_field_password') }}</label>
                                    </div>
                                    <div class="text-center mt-4">
                                        <button id="send" class="btn btn-indigo">{{ lang('session_login_title') }}</button>
                                    </div>
                                    <!--Hidden-->
                                    <input type="hidden" name="CipheredValue" id="CipheredValue" />
                                    <input type="hidden" name="salt" id="salt" value="{{ salt }}" />
                                    <textarea id="pubkey" style="visibility:hidden;">{{ public_key }}</textarea>
                                </div>
                            </div>
                        </form>
                        <!--Form-->
                    </div>
                    <!--Grid column-->
                </div>
                <!--Grid row-->
            </div>
            <!-- Content -->
        </div>
        <!-- Mask & flexbox options-->
    </div>
    <!-- Full Page Intro -->
</body>
<script type="text/javascript" src="{{ base_url() }}assets/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="{{ base_url() }}assets/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript" src="{{ base_url() }}assets/js/mdb.min.js"></script>
<script type="text/javascript" src="{{ base_url() }}assets/js/jsencrypt.min.js"></script>
<script>
new WOW().init();
$('#username').focus();
$('#send').click(function() {
    submit_form();
});
$('#password').keypress(function(e) {
    if (e.keyCode == 13) {
        submit_form();
    }
});
function submit_form() {
    var encrypt = new JSEncrypt();
    encrypt.setPublicKey($('#pubkey').val());
    //Encrypt the concatenation of the password and the salt
    var encrypted = encrypt.encrypt($('#password').val() + $('#salt').val());
    $('#CipheredValue').val(encrypted);
    $('#loginForm').submit();
}
</script>
</html>